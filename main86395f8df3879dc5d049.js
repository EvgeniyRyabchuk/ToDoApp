(()=>{"use strict";var e,t={156:(e,t,l)=>{l(638),l(723);class r{static cur_focus_list;static lists=[];static addList(e){0==r.lists.length&&(r.cur_focus_list=e.id,e.elem.disabled=!0),r.lists.push(e)}static getCurList(){for(let e of r.lists)if(e.id==r.cur_focus_list)return e}static getCurListByIndex(){for(let e of r.lists)if(e.id==r.cur_focus_list)return e}static getEntryById(e){const t=this.getCurList();for(let l of t.entryList)if(l.id==e)return l}static getListById(e){for(let t of r.lists)if(t.id==e)return t}static deleteCurList(){for(let e=0;e<this.lists.length;e++)this.lists[e].id==r.cur_focus_list&&this.lists.splice(e,1)}static deleteList(e){for(let t=0;t<this.lists.length;t++)this.lists[t].id==e&&this.lists.splice(t,1)}static deleteAll(){r.lists=[]}}const n=r;class s{static maxId=0;constructor(e){this.id="list_"+s.maxId++,this.title=e,this.entryList=[],this.elem=this.createElement()}createElement(){let e=document.createElement("button");return e.id=this.id,e.className="btn btn-primary border-1 border-dark",e.textContent=this.title,e}addEntry(e){this.entryList.push(e)}deleteEntry(e){for(let t=0;t<this.entryList.length;t++)this.entryList[t].id==e&&this.entryList.splice(t,1)}}const o=s;class c{static maxId=0;constructor(e,t=!1){this.id="entry_"+c.maxId++,this.text=e,this.isChecked=t,this.elem=this.createElement()}createElement(){let e=document.querySelector("#cb_pattern").cloneNode(!0);return e.removeAttribute("id"),e.querySelector("input").id=this.id,e.querySelector("input").checked=this.isChecked,e.querySelector("label").dataset.for=this.id,e.querySelector("label").textContent=this.text,e.querySelector(".check-namer").dataset.for=this.id,e.querySelector(".check-delete-img").dataset.for=this.id,console.log(e.querySelector("label")),e}}const i=c;function d(e,t){let l=document.getElementById("alert-collection").querySelector(`.${e}`);l.setAttribute("style","display: flex !important"),l.querySelector(".alert-text").textContent=t,setTimeout((()=>{$(l).fadeOut(1e3)}),3e3)}function a(){let e=n.getCurList().entryList,t=document.querySelector("#field");t.innerHTML="";for(let l of e)t.append(l.elem);document.getElementById(n.cur_focus_list).click(),document.getElementById("listSelector").value=n.cur_focus_list,document.getElementById(n.cur_focus_list).disabled=!0,0==e.length&&document.getElementById("field").append(y())}function u(){let e=document.createElement("div");e.className="empty-field-pl-hold";let t=document.createElement("span");return t.className="ph-msg",t.innerText="Добавте или выберите список",e.append(t),e}function m(){let e=document.createElement("div");e.className="empty-menu-pl-hold";let t=document.createElement("span");return t.innerText="Нет списков",e.append(t),e}function y(){let e=document.createElement("div");e.style.display="block",e.className="no-entry-pl-hold";let t=document.createElement("span");return t.innerText="Нет записей",e.append(t),e}function f(e){let t=document.getElementById("listSelector"),l=document.createElement("option");l.value=e.id,l.innerText=e.title,t.append(l)}function g(e){if(-1!=n.cur_focus_list&&null!=n.cur_focus_list){document.querySelector(`#${n.cur_focus_list}`).disabled=!1}n.cur_focus_list=e;let t=document.querySelector(`#${e}`);return t.disabled=!0,console.dir(t),a(),t}function p(){localStorage.setItem("lastSave",JSON.stringify(n.lists)),localStorage.setItem("lastFocus",n.cur_focus_list),localStorage.setItem("maxListId",o.maxId),localStorage.setItem("maxEntryId",i.maxId)}function h(e){console.log("event");let t=e.target;e.currentTarget;if(console.log(t),"form-check-label"==t.className){const e=t.dataset.for;let l=n.getEntryById(e),r=document.querySelector(`input[data-for="${e}"]`);r.value=l.text,r.dataset.for=e,r.style.display="block",r.focus()}p()}function E(e){if(console.log("lksjdgflsjldfjg"),"check-delete-img"==e.target.className){let t=e.target.dataset.for,l=n.getCurList();l.deleteEntry(t);let r=e.target.closest(".form-check");console.log(r),r.remove(),0==l.entryList.length&&document.querySelector("#field").append(y())}if("form-check-input"==e.target.className){n.getEntryById(e.target.getAttribute("id")).isChecked=e.target.checked,console.dir(n)}p()}function S(e){const t=e.target.value,l=e.target.dataset.for;let r=document.querySelector(`label[data-for="${l}"]`);if(t){n.getEntryById(l).text=t,r.textContent=t}else alert("Введите текст для записи");e.target.style.display="none",p()}!function(){console.dir(JSON.parse(localStorage.getItem("lastSave")));const e=JSON.parse(localStorage.getItem("lastSave"));if(e&&e.length>0){for(let t of e){let e=new o(t.title);e.id=t.id,e.elem=e.createElement();for(let l of t.entryList){let t=new i(l.text,l.isChecked);t.id=l.id,t.isChecked=l.isChecked,t.elem=t.createElement(),t.elem.addEventListener("dblclick",h),t.elem.addEventListener("click",E),t.elem.querySelector(".check-namer").addEventListener("blur",S),e.addEntry(t)}n.addList(e),e.elem.disabled=!1,document.getElementById("menu").append(e.elem),f(t)}document.querySelector(".list-selector-wrapper").style.display="block",o.maxId=JSON.parse(localStorage.getItem("maxListId")),i.maxId=JSON.parse(localStorage.getItem("maxEntryId")),n.cur_focus_list=localStorage.getItem("lastFocus"),localStorage.setItem("maxListId",o.maxId),localStorage.setItem("maxEntryId",i.maxId),a()}else document.querySelector("#field").append(u()),document.querySelector(".menu-wrapper").append(m()),console.log("no save file")}(),document.getElementById("listSelector").addEventListener("change",(e=>{let t=g(e.target.value);document.querySelector("#menu").scrollTop=t.offsetTop-(t.offsetHeight+5)})),document.getElementById("menu").addEventListener("click",(e=>{let t=e.target;console.log(t.tagName),"BUTTON"==t.tagName&&g(t.id)})),document.querySelector('button[data-bs-target="#addListModal"]').addEventListener("click",(()=>{document.querySelector("#title-list-text").placeholder=`Новый список ${o.maxId+1}`})),document.getElementById("addList_btn").addEventListener("click",(e=>{let t=document.querySelector("#title-list-text").value;t=0==t.length?`Новый список ${o.maxId+1}`:t,console.log(t);let l=new o(t);n.addList(l),document.querySelector("#menu").append(l.elem),1==n.lists.length&&(document.querySelector(".empty-menu-pl-hold").remove(),document.querySelector(".empty-field-pl-hold").remove(),document.querySelector("#field").append(y()),document.querySelector(".list-selector-wrapper").style.display="block"),n.lists.length>17?document.getElementById("menu").style.overflowY="scroll":document.getElementById("menu").style.overflowY="hidden",f(l),p()})),document.getElementById("addEntry_btn").addEventListener("click",(e=>{if(console.log(n.cur_focus_list),n.cur_focus_list){let e=new i(`какой-то текст ${i.maxId+1}`,!0),t=n.getCurList();t.addEntry(e),console.log(e.elem),e.elem.addEventListener("dblclick",h),e.elem.addEventListener("click",E),e.elem.querySelector(".check-namer").addEventListener("blur",S),1==t.entryList.length&&document.querySelector(".no-entry-pl-hold").remove(),document.querySelector("#field").append(e.elem),p()}else alert("Выберите или создайте список для добавления записи!")})),window.onbeforeunload=function(e){p()},document.getElementById("deleteList_btn").addEventListener("click",(e=>{if(confirm(`Вы  действительнохотите удалить список: ${n.getCurList().title}`)){const e=n.getCurList(),l=n.lists.indexOf(e);if(n.deleteCurList(),document.getElementById(e.id).remove(),t=e.id,document.getElementById("listSelector").querySelector(`option[value="${t}"]`).remove(),n.cur_focus_list=-1,0==n.lists.length){let e=document.getElementById("field");e.innerHTML="",e.append(u()),document.querySelector(".menu-wrapper").append(m()),document.querySelector(".list-selector-wrapper").style.display="none"}else l<n.lists.length-1?n.cur_focus_list=n.lists[l].id:n.cur_focus_list=n.lists[l-1].id,console.log(n.cur_focus_list),a();d("alert-danger",`Вы удалили список ${e.title}`),p()}var t})),document.getElementById("deleteAll_btn").addEventListener("click",(e=>{if(confirm("Вы уверены что хотите всё удалить?")){if(0==n.lists.length)return;let e=document.getElementById("field"),t=document.getElementById("menu"),l=document.querySelector(".menu-wrapper");localStorage.clear(),document.getElementById("listSelector").innerHTML="",n.deleteAll(),o.maxId=0,i.maxId=0,e.innerHTML="",t.innerHTML="",e.append(u()),l.append(m()),document.querySelector(".list-selector-wrapper").style.display="none",d("alert-danger","Все данные были удалены"),p()}}))}},l={};function r(e){var n=l[e];if(void 0!==n)return n.exports;var s=l[e]={exports:{}};return t[e].call(s.exports,s,s.exports,r),s.exports}r.m=t,e=[],r.O=(t,l,n,s)=>{if(!l){var o=1/0;for(d=0;d<e.length;d++){for(var[l,n,s]=e[d],c=!0,i=0;i<l.length;i++)(!1&s||o>=s)&&Object.keys(r.O).every((e=>r.O[e](l[i])))?l.splice(i--,1):(c=!1,s<o&&(o=s));c&&(e.splice(d--,1),t=n())}return t}s=s||0;for(var d=e.length;d>0&&e[d-1][2]>s;d--)e[d]=e[d-1];e[d]=[l,n,s]},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={179:0};r.O.j=t=>0===e[t];var t=(t,l)=>{var n,s,[o,c,i]=l,d=0;for(n in c)r.o(c,n)&&(r.m[n]=c[n]);if(i)var a=i(r);for(t&&t(l);d<o.length;d++)s=o[d],r.o(e,s)&&e[s]&&e[s][0](),e[o[d]]=0;return r.O(a)},l=self.webpackChunk=self.webpackChunk||[];l.forEach(t.bind(null,0)),l.push=t.bind(null,l.push.bind(l))})();var n=r.O(void 0,[217],(()=>r(156)));n=r.O(n)})();